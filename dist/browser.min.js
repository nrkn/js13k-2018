let s=()=>{let e=e=>new Promise(t=>{let n=new Image;n.onload=(()=>t(n)),n.src=e}),t=e=>e[n(e.length)],n=(e,t=0)=>~~(Math.random()*e)+t,o=e=>e.slice().sort(()=>n(3)-1),s=(e,t)=>Math.max(e,t)-Math.min(e,t),r=([e,t])=>[[e-1,t],[e+1,t],[e,t-1],[e,t+1]],h=([e,t])=>[[e-1,t],[e+1,t],[e,t-1],[e,t+1],[e-1,t-1],[e+1,t-1],[e-1,t+1],[e+1,t+1]],l=(e,t,n)=>r(t).filter(t=>e[t[1]][t[0]]===n),a=([e,t],[n,o])=>Math.hypot(s(e,n),s(t,o)),u=(e,t)=>{let n,o=25600;for(let s=0;s<t.length;s++){let r=a(e,t[s]);r<o&&(o=r,n=t[s])}return n},g=([e,t],n)=>{let o=[],s=[[e,t,0]],h=[],l=([e,t,l])=>{m([e,t])&&n([e,t])&&(h[160*t+e]||(o.push([e,t,l]),h[160*t+e]=1,s.push(...r([e,t]).map(([e,t])=>[e,t,l+1]))))};for(;s.length;)l(s.shift());return o},i=([e,t],[n,o])=>{let r=s(e,n),h=s(t,o),l=e,a=t;return r>h&&(n>e&&(l=e+1),e>n&&(l=e-1)),h>r&&(o>t&&(a=t+1),t>o&&(a=t-1)),[l,a]},p=([e,n],[o,s],h=m,l=.66)=>{let a=[],c=[],u=([e,n])=>{c[160*n+e]||(a.push([e,n]),c[160*n+e]=1),e===o&&n===s||u(Math.random()<l?t(r([e,n]).filter(h))||[e,n]:i([e,n],[o,s]))};return u([e,n]),a},d=e=>[3===e?20:1===e?140:n(120,20),0===e?20:2===e?140:n(120,20)],f=()=>[n(120,20),n(120,20)],S=(e,[t,n])=>{for(let o=0;o<e.length;o++)if(e[o][0]===t&&e[o][1]===n)return!0;return!1},m=([e,t])=>e>=0&&e<=159&&t>=0&&t<=159,E=([e,t])=>e>=8&&e<=152&&t>=8&&t<=152,N=()=>{let e=[];for(let t=0;t<160;t++){let t=[];for(let e=0;e<160;e++)t.push(1);e.push(t)}return e},R=(e,t,n)=>{for(let o=0;o<t.length;o++){let[s,r]=t[o];e[r][s]=n([s,r])}},I=(e,s,c)=>{let i=N(),S=n(10,40),m=[d(0),d(1),d(2),d(3)];for(;m.length<S;){let e=f(),t=u(e,m);a(e,t)>10&&m.push(e)}let I=[],O=m.slice();let T=O.pop();let C=T;for(;O.length;){let e=u(T,O),t=p(T,e,E,.33);I.push(...t),T=O.pop()}let w=p(T,C,E,.33);I.push(...w);for(let e=0;e<10;e++){let e=p(t(m),t(m),E,.33);I.push(...e)}let y=[];for(let e=0;e<m.length;e++)y.push(...h(m[e]));let k=((e,n=8448)=>{let o=e.slice(),s=[];for(let e=0;e<o.length;e++){let[t,n]=o[e];s[160*n+t]=1}for(;o.length<n;){let[e,n]=t(o),h=r([e,n]);if(h.length){let[e,n]=t(h);s[160*n+e]||(o.push([e,n]),s[160*n+e]=1)}}return o})((e=>{let t=[],n=[];for(let o=0;o<e.length;o++){let[s,r]=e[o];n[160*r+s]||(t.push(e[o]),n[160*r+s]=1)}return t})([...m,...y,...I])),[A,F]=(e=>{let t=160,n=[0,0];for(let o=0;o<e.length;o++){let[s,r]=e[o];s<t&&(t=s,n=[s,r])}return n})(k);R(i,k,()=>2);let v=g([0,0],([e,t])=>1===i[t][e]);R(i,v,()=>0);let Y=((e,t)=>t.slice().sort((t,n)=>a(e,t)-a(e,n)))([A,F],m),M=p([A,F],Y[0],E,.33);I.push(...M),(e=>{let t=0;let s=o([0,3,6,9]);for(let o=0;o<160;o++)for(let r=0;r<160;r++)if(1===e[o][r]){let h=g([r,o],([t,n])=>1===e[n][t]);let l=0;h.length>5&&(l=t<4?s[t]:n(10),t++),R(e,h,l<3?()=>n(9)+2:l<6?()=>n(3)?n(4)+11:n(9)+2:l<9?()=>n(4)?n(3)+31:n(9)+2:()=>0)}})(i),(e=>{for(let t=0;t<160;t++)for(let o=0;o<160;o++)2===e[t][o]&&(l(e,[o,t],0).length?e[t][o]=n(3)+17:e[t][o]=n(13)+2)})(i),R(i,I,([e,t])=>i[t][e]>=17&&i[t][e]<20?i[t][e]:2),R(i,y,([e,t])=>i[t][e]>=17&&i[t][e]<20?i[t][e]:n(9)+2);for(let t=0;t<Y.length;t++){let[o,r]=Y[t],h=n(13);0===t?i[r][o]=38:1===t?(i[r][o]=20,e[160*r+o]=[0,0],e[0].push([o,r])):2===t?(i[r][o]=n(3)+28,s[160*r+o]=[],s[0].push([o,r])):3===t?(i[r][o]=36,c[0].push([o,r])):t===Y.length-1?i[r][o]=34:h<7?(i[r][o]=n(3)+28,s[160*r+o]=[],s[0].push([o,r])):h<11?(i[r][o]=20,e[160*r+o]=[0,0],e[0].push([o,r])):(i[r][o]=36,c[0].push([o,r]))}return[3,A,F,i,0,A,F]},O=e=>e<2||e>=11&&e<15||20===e||27===e||24===e||25===e||26===e||21===e||22===e||23===e||e>=28&&e<31||e>=31&&e<34||36===e||44===e||43===e||34===e,T=[];T[0]=[0,"s.png"],T[1]=[1,["Lost contact with","RANGER. Take boat","and investigate."]],T[2]=[1,["Sunrise"]],T[3]=[1,["Sunset"]],T[8]=[1,["I should","investigate"]],T[9]=[2,["Sleep?",""],[["Yes",11],["No",-1]],0,"g"],T[10]=[1,["I'm not tired!"]],T[11]=[4,0],T[12]=[1,["I'm hungry!"]],T[13]=[1,["You died"]],T[14]=[1,["It's RANGER!","","RANGER is DEAD!","","Found keycard"]],T[15]=[1,["It's locked!"]],T[16]=[2,["It's locked!","","Use keycard?",""],[["Yes",17],["No",-1]],0,"g"],T[17]=[4,1],T[18]=[2,["Search ruins?","","1 hour",""],[["Yes",19],["No",-1]],0,"g"],T[19]=[4,2],T[21]=[4,3],T[23]=[4,4],T[26]=[4,5],T[27]=[4,6],T[28]=[4,7],T[29]=[4,8],T[30]=[4,9],T[31]=[4,10],T[33]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 1","","RANGER:","Sent to investigate","ruins. Found strange","technology"],[],0,"a"],T[34]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 2","","RANGER:","Was testing strange","technology. Portals","appeared!"],[],0,"a"],T[35]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 3","","RANGER:","Monsters coming out","of portals! Made it","back to hut. They","only come out at","night"],[],0,"a"],T[36]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 4","","RANGER:","Monsters affecting","computers. Have been","stashing items in","ruins for emergency.","Tried comms but the","satellite is offline"],[],0,"a"],T[37]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 5","","RANGER:","Programmed synth to","make mod chips that","can shut down portal","but computer went","offline! There are","more of them every","night"],[],0,"a"],T[38]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 6","","RANGER:","Got computer online.","Still has errors.","Security system","should be able to","deal with monsters","if can get it online"],[],0,"a"],T[39]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 7","","RANGER:","Comms damaged beyond","repair but can send","a distress signal if","repair the satellite","transmitter with","some chips. Not sure","where the dish is","on island and maps","are offline"],[],0,"a"],T[40]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 8","","RANGER:","No way to warn","rescue team of","monsters with comms","offline. Can't send","distress signal","until deal with","monsters!"],[],0,"a"],T[41]=[4,11],T[42]=[4,12],T[43]=[4,13];let C=e=>{let t=P[0]()[6],n=P[0]()[7];c.className=t,c.width=c.height=160,3===n[0]&&(F(e),v()),0===n[0]&&"s.png"===n[1]&&M.drawImage(L,0,0),1===n[0]&&k(n[1]),2===n[0]&&A(n),5===n[0]&&Y(),requestAnimationFrame(C)},w=(e="",t=0,n=0)=>M.drawImage(G,8*(e.charCodeAt(0)-32),0,8,8,8*t,8*n,8,8),y=(e="",t=0,n=0)=>{for(let o=0;o<e.length;o++)w(e[o],t+o,n)},k=e=>{let t=~~((20-e.length)/2);for(let n=0;n<e.length;n++){let o=~~((20-e[n].length)/2);y(e[n],o,t+n)}},A=e=>{for(let t=0;t<e[1].length;t++)y(e[1][t],0,t);y("<X>",17,0);let t=e[1].length%2?1:0;for(let n=0;n<e[2].length;n++)y(`${n+1} ${n===e[3]?"<":" "}${e[2][n][0]}${n===e[3]?">":" "}`,0,2*n+e[1].length+t)},F=e=>{let t=~~(e/500)%2?0:1,n=P[0]()[8],o=P[0]()[7],s=o[3],r=o[1],h=o[2],l=o[4],a=o[5],c=o[6],u=P[0]()[2],g=P[0]()[0],i=P[0]()[12],p=P[0]()[4]>=18||P[0]()[4]<6;for(let e=0;e<9;e++)for(let o=0;o<9;o++){let d=r-4+o,f=h-4+e;let S=16*t;if(m([d,f])){let e=s[f][d];e&&(S=16*e)}if(M.drawImage($,S,0,16,16,16*(o+1),16*(e+1),16,16),36===s[f][d]&&(p?M.drawImage($,16*(36+t),0,16,16,16*(o+1),16*(e+1),16,16):M.drawImage($,704,0,16,16,16*(o+1),16*(e+1),16,16)),0===l&&p)for(let s=0;s<n.length;s++){let r=n[s],h=r[0],l=r[1],a=r[2];h===d&&l===f&&r[3]>0&&(S=16*(7+t)+16*a*2,M.drawImage(b,S,0,16,16,16*(o+1),16*(e+1),16,16))}4===o&&4===e&&(S=u?16*t+16*g*2:64,M.drawImage(b,S,0,16,16,16*(o+1),16*(e+1),16,16)),0===l&&d===a-2&&f===c&&M.drawImage(b,80,0,16,16,16*(o+1),16*(e+1),16,16),0===l&&d===a-1&&f===c&&M.drawImage(b,96,0,16,16,16*(o+1),16*(e+1),16,16),0!==l||i[160*f+d]||M.drawImage($,672,0,16,16,16*(o+1),16*(e+1),16,16)}},v=()=>{let e=P[0]()[1],t=P[0]()[2],n=P[0]()[9],o=P[0]()[10],s=P[0]()[11];y(`RANGER DOWN ${P[2]()}`,2.5,.5),M.drawImage($,256,0,16,16,0,0,16,16),y(`${t}`,t<10?.5:0,2),M.drawImage($,240,0,16,16,0,32,16,16),y(`${e}`,e<10?.5:0,6),M.drawImage($,624,0,16,16,0,64,16,16),y(`${n}`,n<10?.5:0,10),M.drawImage($,656,0,16,16,0,96,16,16),y(`${o}`,o<10?.5:0,14),M.drawImage($,640,0,16,16,0,128,16,16),y(`${s}`,s<10?.5:0,18)},Y=()=>{let e=P[0]()[7],t=P[0]()[12],n=P[0]()[13],o=P[0]()[14],s=(P[0]()[15],e[1]),r=e[2],h=e[3],l=e[4];for(let e=0;e<160;e++)for(let n=0;n<160;n++){let o=~~(n/40),s=~~(e/40),r=h[e][n],a=r>=17&&r<20;l[4*s+o]?0===r||!t[160*e+n]&&!a?M.drawImage($,432,0,1,1,n,e,1,1):M.drawImage($,32,0,1,1,n,e,1,1):n>8&&e>8&&(n%2&&!(e%2)||!(n%2)&&e%2)&&M.drawImage($,32,0,1,1,n,e,1,1)}for(let e=0;e<160;e++)for(let t=0;t<160;t++){let s=~~(t/40),r=~~(e/40),a=h[e][t];if(l[4*r+s]){if(20===a){n[160*e+t][0]?M.drawImage(D,35,0,7,7,t-3,e-3,7,7):M.drawImage(D,0,0,7,7,t-3,e-3,7,7)}if(a>=28&&a<31){o[160*e+t].length?M.drawImage(D,7,0,7,7,t-3,e-3,7,7):M.drawImage(D,42,0,7,7,t-3,e-3,7,7)}34===a&&M.drawImage(D,14,0,7,7,t-3,e-3,7,7),36===a&&M.drawImage(D,28,0,7,7,t-3,e-3,7,7),43===a&&M.drawImage(D,56,0,7,7,t-3,e-3,7,7)}}M.drawImage(D,21,0,7,7,s-3,r-3,7,7);for(let e=0;e<40;e++)M.drawImage(G,8*(16+e),0,8,8,0,40*e+20,8,8);for(let e=0;e<40;e++)M.drawImage(G,8*(33+e),0,8,8,40*e+20,0,8,8)},M=c.getContext("2d");let G,$,b,L,D,P=(()=>{let e,s,r,l,c,u,p,d,f,E,C,w,y,k,A,F,v,Y,M,G,$,b,L,D;let P=()=>{e=[[]],s=[[]],D=[[]],r=0,l=99,c=99,u=99,p=5,d=50,f=50,E=17,C=55,T[7]=I(e,s,D),y=[T[7],T[1],T[0]],w="",k=[],F=0,M=0,b=-1,L=-1,G=[33],$=[],A=[];let t=T[7],n=t[1],o=t[2];$[4*~~(o/40)+~~(n/40)]=1,B(),K(),Z(t)},H=()=>{y.pop(),y.length||P()},U=([e,t])=>{let o=n(2),s=n(2)+1,r=T[7],h=r[3][t][e],l=r[1],a=r[2];O(h)||S(k,[e,t])||l===e&&a===t||k.push([e,t,o,s])},B=()=>{for(;k.length<8;){let e=n(160),t=n(160);U([e,t])}},K=()=>{let n=e[0].length,r=~~(2*n),h=~~(9*n),l=~~(2*n);let a=[];for(let e=0;e<r;e++)a.push(0);for(let e=0;e<h;e++)a.push(1);for(let e=0;e<50;e++)a.push(2);for(let e=0;e<l;e++)a.push(3);for(a=o(a);a.length;){let e=a.pop(),[n,o]=t(s[0]);s[160*o+n].push(e)}},W=(e=0)=>{if(c<1)y=[T[13]];else{if(60==++C&&(C=0,E++,e?(c<u&&c++,6===E&&(w="")):(6===E&&(w="",y.push(T[2])),18===E&&(w="i",y.push(T[3])),l>0?(l--,c<u&&c++):(c--,y.push(T[12])))),24===E){M=0,E=0;let e=T[7];for(let t=0;t<160;t++)for(let o=0;o<160;o++)if(36===e[3][t][o]){let e=h([o,t]);for(let t=0;t<e.length;t++)n(3)||U(e[t])}}(()=>{let e=([e,t])=>{for(let n=0;n<k.length;n++){let o=k[n],s=o[0],r=o[1];if(o[3]>0&&e===s&&t===r)return 1}};for(let t=0;t<k.length;t++){let o=k[t],s=o[0],r=o[1],h=y[y.length-1],l=T[7],a=l[1],u=l[2],g=[s,r];if((E>=18||E<6)&&Math.random()<.66){let e=i([s,r],[a,u]);g[0]=e[0],g[1]=e[1]}else n(2)?g[0]=s+(n(3)-1):g[1]=r+(n(3)-1);let p=l[3][g[1]][g[0]];O(p)||e([g[0],g[1]])||a===g[0]&&u===g[1]||(o[0]=g[0],o[1]=g[1],g[0]<s&&(o[2]=1),g[0]>s&&(o[2]=0)),3===h[0]&&0===h[4]&&(E>=18||E<6)&&a===g[0]&&u===g[1]&&n(2)&&c>0&&o[3]>0&&c--}})()}},Z=e=>{if(0===e[4]){let t=e[1],n=e[2];for(let e=-4;e<4;e++)for(let o=-4;o<4;o++){let s=t+o,r=n+e;a([t,n],[s,r])<4&&(A[160*r+s]=1)}}},x=[()=>{for(;6!==E;)W(1)},()=>{v[0]=1,p--},()=>{for(let e=0;e<60;e++)W();let e=Y.pop();if(3===e){let e=n(3)+1;y.push([1,[`Found ${e} food`]]),l+=e}else 0===e?(y.push([1,["Found keycard"]]),p++):1===e?(y.push([1,["Found chip"]]),d++):2===e&&(y.push([1,["Found backup"]]),f++)},()=>{v[1]?y.push([2,["RSOS v3.27","--------------------",""],[["SYNTHESIZE",27],["DIAGNOSTICS",42],["NOTES",28],["COMMS",29],["SECURITY",30],["MAP",31]],0,"a"]):y.push([2,["RSOS v3.27","--------------------","NETWORK OFFLINE","","EMERGENCY MODE",""],[["SYNTHESIZE",27],["DIAGNOSTICS",42]],0,"a"])},()=>{y.push([1,["Fixed 6 chips"]]),d-=6,v[1]=1},()=>{let e=n(3)+6;M=1,l+=e,y.push([1,[`Synthesized ${e} food`]])},()=>{let e=[],t=[2,["RSOS v3.27","--------------------","SYNTHESIZER"],e,0,"a"];M?t[1].push("  CHARGING..."):(e.push(["RATIONS",26]),b>-1&&e.push(["MOD CHIPS",43])),y.push(t)},()=>{let e=[2,["RSOS v3.27","--------------------","NOTES MENU"],G.map(e=>[`ENTRY ${e}`,e]),0,"a"];y.push(e)},()=>{},()=>{},()=>{let e=T[7],t=[5,e[1],e[2],e[3],$];y.push(t)},()=>{f--;let e=G.length+33,o=n(8);if(G.length>4&&-1===b)y.push([1,["Recovered 1 synth","database entry"]]),b=0;else if(o<3&&e<41)G.push(e),y.push(T[G.length+33-1]),y.push([1,["Recovered 1 note","database entry"]]);else{let n=[];for(let e=0;e<4;e++)for(let t=0;t<4;t++)$[4*e+t]||n.push([t,e]);if(n.length){let[e,o]=t(n);$[4*o+e]=1,x[10](),y.push([1,["Recovered 1 map","database entry"]])}else e<41?(G.push(e),y.push(T[G.length+33-1]),y.push([1,["Recovered 1 note","database entry"]])):y.push([1,["Disk corrupt"]])}},()=>{if(v[1]){let e=[];for(let t=0;t<4;t++)for(let n=0;n<4;n++)$[4*t+n]||e.push([n,t]);let t=["RSOS v3.27","--------------------","DIAGNOSTICS","","NETWORK ONLINE","SYNTHESIZE ONLINE","  RESTORE BACKUPS","NOTES ONLINE"];G.length<8&&t.push("  RESTORE BACKUPS"),t.push(...["COMMS OFFLINE","SECURITY OFFLINE","MAP ONLINE"]),e.length&&t.push("  RESTORE BACKUPS"),y.push([2,t,[],0,"a"])}else y.push([2,["RSOS v3.27","--------------------","DIAGNOSTICS","","NETWORK OFFLINE","  FIX 6 CHIPS","SYNTHESIZE ONLINE","  EMERGENCY MODE","NOTES OFFLINE","COMMS OFFLINE","SECURITY OFFLINE","MAP OFFLINE"],[],0,"a"])},()=>{let e=n(3)+1;M=1,b+=e,d+=e,y.push([1,[`Synthesized ${e}`,"mod chips"]])}];return P(),[()=>[r,l,c,u,E,C,(()=>0===y[y.length-1][0]?"g":1===y[y.length-1][0]?"g":5===y[y.length-1][0]?"a":2===y[y.length-1][0]?y[y.length-1][4]:w)(),y[y.length-1],k,p,d,f,A,e,s,D],P,()=>`${E<10?"0":""}${E}:${C<10?"0":""}${C}`,W,(t,o)=>{let h=y[y.length-1];if(3!==h[0])return;let l;if(W(),-1===t&&(r=1),1===t&&(r=0),t=h[1]+t,o=h[2]+o,(E>=18||E<6)&&0===h[4])for(let e=0;e<k.length;e++)k[e][0]===t&&k[e][1]===o&&k[e][3]>0&&(l=k[e]);if(c>0&&m([t,o])&&!O(h[3][o][t])&&!l&&(h[1]=t,h[2]=o),Z(h),0===h[4]&&(20===h[3][o][t]&&((v=e[160*o+t])[0]?y.push((()=>{let e=N(),t=g([0,0],([t,n])=>1===e[n][t]);return R(e,t,()=>27),e[19][18]=21,e[19][19]=22,e[19][20]=23,e[20][18]=2,e[20][19]=2,e[20][20]=2,e[21][18]=24,e[21][19]=25,e[21][20]=26,[3,20,20,e,1,20,20]})()):p?y.push(T[16]):y.push(T[15])),o===h[6]&&t===h[5]-1&&y.push(T[8]),l&&n(2)&&l[3]--,38!==h[3][o][t]||F||(F=1,y.push(T[14]),p++),h[3][o][t]>=28&&h[3][o][t]<31&&((Y=s[160*o+t]).length?y.push(T[18]):y.push([1,["Nothing here"]])),36===h[3][o][t]&&(b>0?(y.push([1,["Portal disabled!"]]),h[3][o][t]=43,D[160*o+t]=1,b--,d--):b>-1?y.push([1,["Need mod chips"]]):y.push([1,["A strange portal"]]))),1===h[4]){if(26===h[3][o][t]&&y.pop(),21===h[3][o][t]){let e=[["Use",21]],t=[2,["A computer",""],e,0,"g"];!v[1]&&d>5&&e.push(["Fix Chips",23]),v[1]&&f>0&&e.push(["Restore Backups",41]),e.length>1?y.push(t):x[3]()}23===h[3][o][t]&&(E>=17||E<6?y.push(T[9]):y.push(T[10]))}},H,e=>{2===y[y.length-1][0]&&(y[y.length-1][3]=e)},()=>{if(2===y[y.length-1][0]){let e=y[y.length-1];if(!e[2].length)return void y.pop();let t=e[3],n=e[2][t][1];-1===n?H():4===T[n][0]?(y.pop(),x[T[n][1]]()):y.push(T[n])}}]})();document.onkeyup=(e=>{let t=P[0]()[7];if(3===t[0]&&(e=>{65!==e.keyCode&&37!==e.keyCode||P[4](-1,0),68!==e.keyCode&&39!==e.keyCode||P[4](1,0),87!==e.keyCode&&38!==e.keyCode||P[4](0,-1),83!==e.keyCode&&40!==e.keyCode||P[4](0,1)})(e),0!==t[0]&&1!==t[0]&&5!==t[0]||32!==e.keyCode&&27!==e.keyCode&&13!==e.keyCode||P[5](),2===t[0]){let n=t;27===e.keyCode&&P[5](),87!==e.keyCode&&38!==e.keyCode||n[3]>0&&P[6](n[3]-1),83!==e.keyCode&&40!==e.keyCode||n[3]<n[2].length-1&&P[6](n[3]+1),32!==e.keyCode&&13!==e.keyCode||P[7]()}});let H=([e,t])=>{let n=P[0]()[7],o=c.getBoundingClientRect().width/10,r=~~((e-c.getBoundingClientRect().left)/o)-1,h=~~((t-c.getBoundingClientRect().top)/o)-1;if(3===n[0]){if(4===r&&4===h)return;if(r<0||h<0)return;let e=s(r,4),t=s(h,4);let n=0,o=0;e>t?n=r>4?1:-1:e<t&&(o=h>4?1:-1),P[4](n,o)}if(0!==n[0]&&1!==n[0]&&5!==n[0]||P[5](),2===n[0]){h<0&&P[5]();let e=n,t=e[1].length%2?1:0,o=(e[1].length+t)/2,s=e[2].length,r=h-o+1;r>=0&&r<s&&(r===e[3]?P[7]():P[6](r))}};c.ontouchend=(e=>{e.preventDefault();for(let t=0;t<e.changedTouches.length;t++)H([e.changedTouches[t].clientX,e.changedTouches[t].clientY])}),c.onclick=(e=>{e.preventDefault(),H([e.clientX,e.clientY])}),((...t)=>Promise.all(t.map(e)))("f.gif","t.gif","p.gif","s.png","c.gif").then(e=>{[G,$,b,L,D]=e,requestAnimationFrame(C)})};s();